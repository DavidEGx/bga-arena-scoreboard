# ðŸ™¾  bga-arena-scoreboard
Filter ranking of players in BGA Arena

## âœ¨ Demo
![GIF Demo](https://raw.githubusercontent.com/DavidEGx/bga-arena-scoreboard/main/demo.gif?token=AAIB2POYM6LBERGEGLOABBK7ALHGU)

## ðŸ“¦ Setup
Create a new bookmark in your browser that points to this "address":

    javascript:(function()%7B%2F**%0A%20*%20BGA%20Arena%20Scoreboard%0A%20*%0A%20*%20Script%20to%20filter%20BGA%20Arena%20scoreboard%20so%20you%20can%20get%0A%20*%20the%20score%20of%20a%20predefined%20list%20of%20players.%0A%20*%0A%20*%20Usage%3A%0A%20*%20%201.%20Copy%20and%20paste%20this%20code%20to%20the%20developer%20console%0A%20*%20%20%20%20%20(or%20put%20it%20as%20a%20bookmarklet%20https%3A%2F%2Fcaiorss.github.io%2Fbookmarklet-maker%2F)%0A%20*%20%202.%20Introduce%20a%20list%20of%20players%20separated%20by%20spaces.%0A%20*%20%203.%20Click%20Ok%20and%20wait%20until%20the%20scoreboard%20loads.%0A%20*%2F%0A%0A(function()%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20%2F%2F%20DO%20NOT%20use%20a%20very%20small%20interval%2C%20don't%20want%20to%20abuse%20BGA%20servers.%0A%20%20const%20REQUEST_INTERVAL%20%3D%20300%3B%0A%0A%20%20createUi()%3B%0A%0A%20%20%2F**%0A%20%20%20*%20Adds%20text%20area%20so%20user%20can%20paste%20user's%20list%0A%20%20%20*%2F%0A%20%20function%20createUi()%20%7B%0A%20%20%20%20const%20ui%20%3D%20document.createElement('div')%3B%0A%20%20%20%20const%20countryLbl%20%20%3D%20document.createElement('p')%3B%0A%20%20%20%20const%20countrySel%20%20%3D%20document.createElement('select')%3B%0A%20%20%20%20const%20userLbl%20%20%20%20%20%3D%20document.createElement('p')%3B%0A%20%20%20%20const%20userList%20%20%20%20%3D%20document.createElement('textArea')%3B%0A%20%20%20%20const%20limitsLbl%20%20%20%3D%20document.createElement('p')%3B%0A%20%20%20%20const%20limitUInput%20%3D%20document.createElement('input')%3B%0A%20%20%20%20const%20limitRInput%20%3D%20document.createElement('input')%3B%0A%20%20%20%20const%20progressLbl%20%3D%20document.createElement('p')%3B%0A%20%20%20%20const%20button%20%20%20%20%20%20%3D%20document.createElement('a')%3B%0A%0A%20%20%20%20countrySel.id%20%20%3D%20'sbCountrySelector'%3B%0A%20%20%20%20userList.id%20%20%20%20%3D%20'sbUserList'%3B%0A%20%20%20%20progressLbl.id%20%3D%20'sbProgressLbl'%3B%0A%0A%20%20%20%20%2F%2F%20Labels%0A%20%20%20%20countryLbl.innerText%20%20%3D%20'Country%20filter%3A'%3B%0A%20%20%20%20userLbl.innerText%20%20%20%20%20%3D%20'User%20filter%3A'%3B%0A%20%20%20%20limitsLbl.innerText%20%20%20%3D%20'Limits%3A'%3B%0A%20%20%20%20progressLbl.innerText%20%3D%20'Running...'%3B%0A%0A%20%20%20%20%2F%2FCreate%20and%20append%20the%20options%0A%20%20%20%20for%20(const%20%5Bkey%2C%20value%5D%20of%20Object.entries(COUNTRIES()))%20%7B%0A%20%20%20%20%20%20const%20option%20%3D%20document.createElement('option')%3B%0A%20%20%20%20%20%20option.value%20%3D%20key%3B%0A%20%20%20%20%20%20option.text%20%3D%20value%3B%0A%20%20%20%20%20%20countrySel.appendChild(option)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Configure%20user%20list%0A%20%20%20%20userList.style.display%20%3D%20'block'%3B%0A%20%20%20%20userList.style.width%20%20%20%3D%20'100%25'%3B%0A%20%20%20%20userList.style.height%20%20%3D%20'40%25'%3B%0A%0A%20%20%20%20%2F%2F%20Configure%20limits%0A%20%20%20%20limitUInput.type%20%20%3D%20'number'%3B%0A%20%20%20%20limitUInput.value%20%3D%2020%3B%0A%20%20%20%20limitRInput.type%20%20%3D%20'number'%3B%0A%20%20%20%20limitRInput.value%20%3D%201000%3B%0A%0A%20%20%20%20%2F%2F%20Add%20elements%20to%20main%20ui%20element%0A%20%20%20%20ui.appendChild(countryLbl)%3B%0A%20%20%20%20ui.appendChild(countrySel)%3B%0A%20%20%20%20ui.appendChild(userLbl)%3B%0A%20%20%20%20ui.appendChild(userList)%3B%0A%20%20%20%20ui.appendChild(limitsLbl)%3B%0A%20%20%20%20ui.appendChild(limitUInput)%3B%0A%20%20%20%20ui.appendChild(limitRInput)%3B%0A%20%20%20%20ui.appendChild(button)%3B%0A%0A%20%20%20%20%2F%2F%20Configuration%20of%20main%20ui%20element%0A%20%20%20%20ui.style.position%20%3D%20'fixed'%3B%0A%20%20%20%20ui.style.right%20%3D%20'0'%3B%0A%20%20%20%20ui.style.top%20%3D%20'0'%3B%0A%20%20%20%20ui.style.margin%20%3D%20'1em%201em'%3B%0A%20%20%20%20ui.style.width%20%3D%20'400px'%3B%0A%20%20%20%20ui.style.height%20%3D%20'300px'%3B%0A%20%20%20%20ui.style.padding%20%3D%20'1.5em'%3B%0A%20%20%20%20ui.style.backgroundColor%20%3D%20'%23eeefef'%3B%0A%20%20%20%20ui.style.zIndex%20%3D%2099999%3B%0A%20%20%20%20ui.style.border%20%3D%20'2px%20solid%20black'%3B%0A%20%20%20%20ui.style.boxShadow%20%3D%20'7px%207px%20%23444'%3B%0A%0A%20%20%20%20button.classList%20%3D%20'bgabutton%20bgabutton_blue'%3B%0A%20%20%20%20button.innerText%20%3D%20'Run'%3B%0A%20%20%20%20button.onclick%20%20%20%3D%20function()%20%7B%0A%20%20%20%20%20%20const%20players%20%3D%20parsePlayers(userList.value)%3B%0A%20%20%20%20%20%20run(countrySel.value%2C%20players%2C%20parseInt(limitUInput.value)%2C%20parseInt(limitRInput.value))%3B%0A%0A%20%20%20%20%20%20button.style.display%20%3D%20'none'%3B%0A%20%20%20%20%20%20ui.appendChild(progressLbl)%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20document.body.appendChild(ui)%3B%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Do%20the%20work.%0A%20%20%20*%20Load%20players%2C%20remove%20players%20not%20desired%20and%20repeat.%0A%20%20%20*%2F%0A%20%20async%20function%20run(country%2C%20playersToKeep%2C%20limitU%2C%20limitR)%20%7B%0A%20%20%20%20const%20MAX_REQUESTS%20%3D%20limitR%20%2F%2010%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20MAX_REQUESTS%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20await%20loadMorePlayers()%3B%0A%20%20%20%20%20%20removePlayers(country%2C%20playersToKeep)%3B%0A%0A%20%20%20%20%20%20const%20playersSoFar%20%3D%20getVisiblePlayers()%3B%0A%20%20%20%20%20%20if%20(playersToKeep.length%20%3E%200%20%26%26%20playersToKeep.length%20%3D%3D%3D%20playersSoFar.length)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Got%20all%20the%20required%20players%2C%20no%20need%20to%20keep%20querying.%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(playersSoFar.length%20%3E%3D%20limitU)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Reached%20limit%20of%20max%20number%20of%20players%20required.%0A%20%20%20%20%20%20%20%20let%20i%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20(const%20player%20of%20getVisiblePlayers())%20%7B%0A%20%20%20%20%20%20%20%20%20%20if%20(i%20%3E%3D%20limitU)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20player.classList.add('hidden')%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20i%2B%2B%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20break%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20await%20new%20Promise(done%20%3D%3E%20setTimeout(()%20%3D%3E%20done()%2C%20REQUEST_INTERVAL))%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20const%20progressLbl%20%3D%20document.getElementById('sbProgressLbl')%3B%0A%20%20%20%20const%20userList%20%20%20%20%3D%20document.getElementById('sbUserList')%3B%0A%20%20%20%20const%20countrySel%20%3D%20document.getElementById('sbCountrySelector')%3B%0A%20%20%20%20progressLbl.innerText%20%3D%20'Done!'%3B%0A%20%20%20%20progressLbl.style.color%20%3D%20'green'%3B%0A%0A%20%20%20%20countrySel.addEventListener('change'%2C%20function%20()%20%7B%0A%20%20%20%20%20%20resetList()%3B%0A%20%20%20%20%20%20const%20players%20%3D%20parsePlayers(userList.value)%3B%0A%20%20%20%20%20%20removePlayers(countrySel.value%2C%20players)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20userList.addEventListener('change'%2C%20function%20()%20%7B%0A%20%20%20%20%20%20resetList()%3B%0A%20%20%20%20%20%20const%20players%20%3D%20parsePlayers(userList.value)%3B%0A%20%20%20%20%20%20removePlayers(countrySel.value%2C%20players)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Load%20more%20players%20from%20the%20ranking%0A%20%20%20*%2F%0A%20%20async%20function%20loadMorePlayers()%20%7B%0A%20%20%20%20%2F%2F%20Just%20click%20the%20button%20and%20wait.%0A%20%20%20%20%2F%2F%20Not%20the%20smartest%20way%20but%20works.%0A%20%20%20%20const%20button%20%3D%20document.querySelector('%23seemoreRanking')%20%7C%7C%20document.querySelector('%23seemore')%20%7C%7C%20document.querySelector('%23seemore_rankings')%3B%0A%20%20%20%20button.click()%3B%0A%20%20%20%20await%20new%20Promise(done%20%3D%3E%20setTimeout(()%20%3D%3E%20done()%2C%20REQUEST_INTERVAL))%3B%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Return%20list%20of%20players%0A%20%20%20*%2F%0A%20%20function%20getPlayers()%20%7B%0A%20%20%20%20if%20(document.getElementById('mainRanking'))%20%7B%0A%20%20%20%20%20%20return%20document.querySelectorAll('%23mainRanking%20.player_in_list')%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20return%20document.querySelectorAll('.gameranking%20.player_in_list')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Return%20list%20of%20visible%20players%0A%20%20%20*%2F%0A%20%20function%20getVisiblePlayers()%20%7B%0A%20%20%20%20if%20(document.getElementById('mainRanking'))%20%7B%0A%20%20%20%20%20%20return%20document.querySelectorAll('%23mainRanking%20.player_in_list%3Anot(.hidden)')%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20return%20document.querySelectorAll('.gameranking%20.player_in_list%3Anot(.hidden)')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Parse%20players%0A%20%20%20*%2F%0A%20%20function%20parsePlayers(playersStr)%20%7B%0A%20%20%20%20const%20commaValues%20%3D%20playersStr.split('%2C')%3B%0A%20%20%20%20const%20semicolonValues%20%3D%20playersStr.split('%3B')%3B%0A%20%20%20%20const%20newlineValues%20%3D%20playersStr.split('%5Cn')%3B%0A%20%20%20%20const%20usersFound%20%3D%20Math.max(commaValues.length%2C%20semicolonValues.length%2C%20newlineValues.length)%3B%0A%0A%20%20%20%20let%20players%3B%0A%20%20%20%20if%20(commaValues.length%20%3D%3D%3D%20usersFound)%20%7B%0A%20%20%20%20%20%20players%20%3D%20commaValues%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(semicolonValues.length%20%3D%3D%20usersFound)%20%7B%0A%20%20%20%20%20%20players%20%3D%20semicolonValues%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20if%20(newlineValues.length%20%3D%3D%20usersFound)%20%7B%0A%20%20%20%20%20%20players%20%3D%20newlineValues%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20players%20%3D%20players.filter(x%20%3D%3E%20x)%3B%0A%20%20%20%20return%20players%3B%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Remove%20all%20players%20from%20the%20scoreboard%20except%20the%20ones%0A%20%20%20*%20than%20belong%20to%20the%20country%20received%20as%20parameter%20and%20are%0A%20%20%20*%20inside%20the%20playersToKeep%20array.%0A%20%20%20*%2F%0A%20%20function%20removePlayers(country%2C%20playersToKeep)%20%7B%0A%20%20%20%20playersToKeep%20%3D%20playersToKeep.map(p%20%3D%3E%20p.toLowerCase())%3B%0A%0A%20%20%20%20for%20(const%20player%20of%20getVisiblePlayers())%20%7B%0A%20%20%20%20%20%20const%20name%20%3D%20player.querySelector('a.playername').innerText.toLowerCase()%3B%0A%0A%20%20%20%20%20%20if%20(country%20%26%26%20country%20!%3D%20player.querySelector('.flag').style.backgroundPosition)%20%7B%0A%20%20%20%20%20%20%20%20player.classList.add('hidden')%3B%0A%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20if%20(playersToKeep.length%20%3E%200%20%26%26%20!playersToKeep.includes(name))%20%7B%0A%20%20%20%20%20%20%20%20player.classList.add('hidden')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20%2F**%0A%20%20%20*%20Display%20all%20players%20again%0A%20%20%20*%2F%0A%20%20function%20resetList()%20%7B%0A%20%20%20%20Array.from(getPlayers()).forEach((el)%20%3D%3E%20el.classList.remove('hidden'))%3B%0A%20%20%7D%0A%0A%20%20function%20COUNTRIES()%20%7B%0A%20%20%20%20%2F%2F%20IDs%20of%20the%20countries%20here%20are%20just%20the%20offset%20in%20the%20background%20image.%0A%20%20%20%20%2F%2F%20It'd%20be%20nice%20to%20use%20country%20ids%20instead...%20Probably%20that%20would%20require%0A%20%20%20%20%2F%2F%20to%20change%20the%20%60document.querySelector('%23seemoreRanking').click()%60%20above%0A%20%20%20%20%2F%2F%20and%20use%20an%20ajax%20call%20to%20%60getRanking.html%60%20instead.%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20''%3A%20'Any%20country'%2C%0A%20%20%20%20%20%20'-0px%20-55px'%3A%20'Albania'%2C%0A%20%20%20%20%20%20'-0px%20-99px'%3A%20'Argentina'%2C%0A%20%20%20%20%20%20'-16px%20-22px'%3A%20'Australia'%2C%0A%20%20%20%20%20%20'-48px%20-33px'%3A%20'Belarus'%2C%0A%20%20%20%20%20%20'-16px%20-99px'%3A%20'Belgium'%2C%0A%20%20%20%20%20%20'-32px%20-88px'%3A%20'Brazil'%2C%0A%20%20%20%20%20%20'-48px%20-55px'%3A%20'Canada'%2C%0A%20%20%20%20%20%20'-64px%20-44px'%3A%20'Chile'%2C%0A%20%20%20%20%20%20'-144px%20-88px'%3A%20'Croatia'%2C%0A%20%20%20%20%20%20'-64px%20-77px'%3A%20'Colombia'%2C%0A%20%20%20%20%20%20'-80px%20-44px'%3A%20'Czech%20Republic'%2C%0A%20%20%20%20%20%20'-112px%20-66px'%3A%20'France'%2C%0A%20%20%20%20%20%20'-112px%20-11px'%3A%20'Finland'%2C%0A%20%20%20%20%20%20'-80px%20-55px'%3A%20'Germany'%2C%0A%20%20%20%20%20%20'-128px%20-99px'%3A%20'Greece'%2C%0A%20%20%20%20%20%20'-144px%20-11px'%3A%20'Guatemala'%2C%0A%20%20%20%20%20%20'-144px%20-55px'%3A%20'Hong%20Kong'%2C%0A%20%20%20%20%20%20'-160px%20-0px'%3A%20'Hungary'%2C%0A%20%20%20%20%20%20'-160px%20-99px'%3A%20'Italy'%2C%0A%20%20%20%20%20%20'-176px%20-0px'%3A%20'Jamaica'%2C%0A%20%20%20%20%20%20'-176px%20-22px'%3A%20'Japan'%2C%0A%20%20%20%20%20%20'-208px%20-33px'%3A%20'Latvia'%2C%0A%20%20%20%20%20%20'-208px%20-11px'%20%3A%20'Lithuania'%2C%0A%20%20%20%20%20%20'-240px%20-55px'%3A%20'Malaysia'%2C%0A%20%20%20%20%20%20'-240px%20-44px'%3A%20'Mexico'%2C%0A%20%20%20%20%20%20'-224px%20-99px'%3A%20'Montserrat'%2C%0A%20%20%20%20%20%20'-256px%20-33px'%3A%20'Netherlands'%2C%0A%20%20%20%20%20%20'-272px%20-11px'%3A%20'Peru'%2C%0A%20%20%20%20%20%20'-272px%20-66px'%3A%20'Poland'%2C%0A%20%20%20%20%20%20'-288px%20-11px'%3A%20'Portugal'%2C%0A%20%20%20%20%20%20'-288px%20-66px'%3A%20'Romania'%2C%0A%20%20%20%20%20%20'-288px%20-88px'%3A%20'Russian%20Federation'%2C%0A%20%20%20%20%20%20'-320px%20-0px'%3A%20'Slovakia'%2C%0A%20%20%20%20%20%20'-96px%20-77px'%3A%20'Spain'%2C%0A%20%20%20%20%20%20'-64px%20-11px'%3A%20'Switzerland'%2C%0A%20%20%20%20%20%20'-352px%20-44px'%3A%20'Taiwan'%2C%0A%20%20%20%20%20%20'-112px%20-88px'%3A%20'United%20Kingdom'%2C%0A%20%20%20%20%20%20'-352px%20-99px'%3A%20'United%20States'%2C%0A%20%20%20%20%20%20'-352px%20-66px'%3A%20'Ukraine'%2C%0A%20%20%20%20%20%20'-368px%20-22px'%3A%20'Vatican'%2C%0A%20%20%20%20%20%20'-368px%20-44px'%3A%20'Venezuela'%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%0A%7D)()%3B%7D)()%3B

## ðŸš€ Usage
1. Go to the raking page for a given game and season (for example: https://boardgamearena.com/halloffame?game=1&season=7)
2. Click on the bookmark you created during setup.
3. Paste a list of players separated by commas.
4. Click ok and wait until the list is complete.

## ðŸ“œ License
[GPL v3](https://www.gnu.org/licenses/gpl-3.0.en.html)
